import{N as o,q as t,B as a,z as e,C as n}from"./index-JN3MqxNP.js";let s="http://q.queryagency.com",i={};const c=({data:c={},method:l="get",url:d="",noLogin:r=!1,type:g=1,showToast:m=!1,returnUrl:p=!1})=>new Promise(((u,h)=>{p&&(console.log(s,d,g,s),u(`${s}/api/${d}`)),i[d]?(a({noConflict:!0}),console.log(d),h("请求次数频繁",d)):(i[d]=!0,o({url:`${s}/api/${d}`,data:c,method:l,header:{"content-type":"application/json",Authorization:"Bearer "+t("token")},success:o=>{setTimeout((()=>{i[d]=!1,a({noConflict:!0})}),250),0==o.data.code?u(o.data):40001==o.data.code?r?u({code:40001,data:[]}):(h({code:40001,msg:o.data.msg}),e({url:"/pages/login/login"})):(m&&n({title:o.data.msg,icon:"none"}),h({...o.data}))},fail:o=>{setTimeout((()=>{a({noConflict:!0}),i[d]=!1}),250),m||n({title:"网络连接超时",icon:"none"}),h(o)}}))}));export{c as a};
