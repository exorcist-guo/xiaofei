import{E as o,C as t,u as a,m as e,v as n}from"./index-ed3b9f74.js";let i="http://integraltest.queryping.com",s={};const l=({data:l={},method:c="get",url:d="",noLogin:r=!1,type:g=1,showToast:m=!1,returnUrl:p=!1})=>new Promise(((u,h)=>{p&&(console.log(i,d,g,i),u(`${i}/api/${d}`)),s[d]?(a({noConflict:!0}),console.log(d),h("请求次数频繁",d)):(s[d]=!0,o({url:`${i}/api/${d}`,data:l,method:c,header:{"content-type":"application/json",Authorization:"Bearer "+t("token")},success:o=>{setTimeout((()=>{s[d]=!1,a({noConflict:!0})}),250),0==o.data.code?u(o.data):40001==o.data.code?r?u({code:40001,data:[]}):(h({code:40001,msg:o.data.msg}),e({url:"/pages/login/login"})):(m&&n({title:o.data.msg,icon:"none"}),h({...o.data}))},fail:o=>{setTimeout((()=>{a({noConflict:!0}),s[d]=!1}),250),m||n({title:"网络连接超时",icon:"none"}),h(o)}}))}));export{l as a};
