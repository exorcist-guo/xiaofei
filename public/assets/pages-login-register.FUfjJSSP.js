import{_ as e,u as a,r as l,f as t,z as i,v as s,A as n,B as r,a as c,w as o,i as u,o as d,b as p,d as g,t as m,h as f,j as A,F as x,e as b,x as y,p as v,y as h,C as I,k as J,I as Q,D as V,S as w}from"./index-CIoLSFLp.js";import{_ as X,a as E,b as B}from"./show.B0O9Pu_2.js";import{a as C,o as R,b as U}from"./uni-app.es.WG3OuHoX.js";import{c as N,v as k,r as Z}from"./user.CvUukcGD.js";import{u as M}from"./request.-HWJRRqg.js";const K=e({__name:"register",setup(e){const{t:K}=a(),T=l(!1),q=l(0),S=t({nick_name:"",mobile:"",invite_mobile:"",verify:"",password:"",realPassword:"",captcha:"",name:"",nation:"",certificate_type:null,real_name:"",id_number:"",certificate_image:[]}),_=l(!1),D=l(!1),F=l({img:"",key:""}),H=l([]);C((e=>{i("invite_mobile")&&(S.invite_mobile=i("invite_mobile"));var a=i("m_info");5==a.is_disabled&&(S.mobile=a.mobile,S.real_name=a.real_name,S.id_number=a.id_number,S.invite_mobile=a.pid_number)})),s((()=>{Y()})),R((()=>{const{certificate_type_name:e}=i("localeList");let a=[];for(let l in e)console.log(l),a.push({key:l,name:e[l]});H.value=a,console.log(q.value,e)}));const O=e=>{S.certificate_type=e.detail.value},j=async()=>{if(console.log(K("login.register.regMobile")),!S.mobile.match(/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$/))return y({title:K("login.register.regMobile"),icon:"none"}),!1;if(!S.captcha)return y({title:K("login.register.regCaptcha"),icon:"none"}),!1;try{const{data:e}=await k({mobile:S.mobile,key:F.value.key,type:"register",captcha:S.captcha});y({title:K("login.register.sendSucess"),icon:"none"}),T.value=!0,q.value=60,globalThis.inter=setInterval((()=>{q.value-=1,0==q.value&&(clearInterval(globalThis.inter),T.value=!1)}),1e3)}catch(e){setTimeout((()=>{Y()}),1e3)}};U((()=>{clearInterval(globalThis.inter)}));const W=async()=>{let e={},a=Object.keys(i("localeList").nation),l=Object.values(i("localeList").nation);for(let i in a)e[l[i]]=a[i];let t=e[i("locale").country];if(console.log("国家id:",t,e),S.password!=S.realPassword)return y({title:K("login.register.faillPass"),icon:"none"}),!1;if(0==S.invite_mobile.length)return y({title:K("login.register.pelaseInput"),icon:"none"}),!1;if(null==S.certificate_type)return y({title:K("login.register.pelaseCertificateType"),icon:"none"}),!1;if(0==S.real_name.length)return y({title:K("login.register.pelaseRealName"),icon:"none"}),!1;if(0==S.id_number.length)return y({title:K("login.register.pelaseIdNumber"),icon:"none"}),!1;if(0==S.certificate_image.length)return y({title:K("login.register.pelaseUploadFile"),icon:"none"}),!1;const s={mobile:S.mobile,invite_mobile:S.invite_mobile,password:S.password,verify:S.captcha,nation:t,name:S.nick_name,certificate_type:H.value[S.certificate_type].key,real_name:S.real_name,id_number:S.id_number,certificate_image:S.certificate_image.join(",")};return console.log(s),await Z(s),v("m_info",""),y({title:K("login.register.success"),icon:"none",duration:3e3}),setTimeout((()=>{h({url:"/pages/login/login"})}),3e3),!1},Y=()=>{n({mask:!0}),N({type:"register",mobile:S.mobile}).then((({data:e})=>{F.value=e.url,r()}))},L=()=>{I({mediaType:["image"],count:5-S.certificate_image.length,success:async e=>{console.log(e);for(let a of e.tempFilePaths){let e=await M(a);console.log(e.data),S.certificate_image.push(e.data.image_url)}}})};return(e,a)=>{const l=u,t=J,i=Q,s=V,n=w;return d(),c(l,{class:"page flex-column-center-center"},{default:o((()=>[p(n,{"scroll-y":"",class:"scroll"},{default:o((()=>[p(l,{class:"title"},{default:o((()=>[g(m(e.$t("login.register.title")),1)])),_:1}),p(l,{class:"input-area flex-start-center-nowrap"},{default:o((()=>[p(l,{class:"icon"},{default:o((()=>[p(t,{class:"image",src:X})])),_:1}),p(i,{name:"account",modelValue:S.invite_mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>S.invite_mobile=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.invite_mobile")},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"input-area flex-start-center-nowrap"},{default:o((()=>[p(l,{class:"icon"},{default:o((()=>[p(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAARZJREFUOE9jZKAyYMRmnqKYcBwTE1P1////VRgZGZmQ1fz///8fIyPjnX///rXef/V2Ebp+DAOVxESiGZkYl/xnYDjMwPB/PwMDwz80TUwMDIyOjAwMtv///Y+59+rNUmR5DAOVxUWuMjAwfrz78rUNFsNgepmUxUWPMDD857/78o02IQN//2NkaL//4k0dvuBVlBBpYvrPUHn35RtW/AZKiP7/z/C/4d6LN434DFSSEKlnZGBsuPviNYovMb08aiCucBwNQ3jIDEyyURAX9gc54cHLtxthTiE+UsRFULKeHD+/IAsH6xuQQX9+/BZ59PHjexCb+KyHpXBQEhfpAxly7+WbIqgLiS8cqF58gb1DzQKW0hoBAFga5BVvOK3rAAAAAElFTkSuQmCC"})])),_:1}),p(i,{name:"account",class:"input flex-1",modelValue:S.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>S.mobile=e),type:"text",placeholder:e.$t("login.register.mobile")},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"flex-start-center-nowrap"},{default:o((()=>[p(l,{class:"input-area flex-start-center-nowrap",style:{width:"384rpx"}},{default:o((()=>[p(i,{name:"account",modelValue:S.captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>S.captcha=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.captcha")},null,8,["modelValue","placeholder"])])),_:1}),p(t,{class:"verify",mode:"widthFix",src:F.value.img,onClick:Y},null,8,["src"])])),_:1}),p(l,{class:"input-area flex-start-center-nowrap"},{default:o((()=>[p(l,{class:"icon"},{default:o((()=>[p(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAgpJREFUOE+V1EuozVEUBvDfVR4ZGJBXooxk4pm8KZSUEgYyMSIiI6XI9BKFUoTMDDBhQpJHorxKRJKR5P0ciIHksZfWuZ1z7vmfc+3JOe3/t7/9rW99e3Xp2+qfsJ+d4F2dAFiAo4nbhBvtzlQRhqKl2IIlOI3ArsEVHMYl9FJcTxhKpmFOUbEIQ3Ae+3AnVc3CdizHV1wtF9/GfdwMTI1wBN7iVQJCRZC9qyhvVJKG+tkYW2yJvQ81wlDzEaHgQR98rYdMwd1iw/BQXSOM3yhhFS7/J2GoPJcW/an38BGOpeHtOJdhb5b6PRu3EZPqPYz/Z/C5+LC5Ddt8XMT1Ys0K/MIRDMsE9DQlOLZhXZE/GQNwMMFP8oKpJZPX8Cyj9C33H+Ik9jcrnJ4dHpd+3isWjMZqvMlARwUL8SnJRuJllh/RaVDYD8/RjeMYWnw5W0qciS/4XUI9Dy/qLNmAXRif3xsIAxdmR6hn5KFBOJGvJvYfN/kbVYSfEfZ/q/npxU1PM7QR7hpmMKKj9WtxufhCaebErKwlYWzGIIgyI+Q/Kjo+MJ9jBDoGRs9qNRwiApHJ8G9rBeGhbFZkLxrVljA+hsIoOfyLOEVDYkXjDpQ3v74Mgyg5FDasdvNwbqqM3O3MU7sxAStxq5X6TgM2cranhHltHj5VfN2B9xVW9OpyFW5MfnhdBajt/wVlqWIV3cWSJQAAAABJRU5ErkJggg=="})])),_:1}),p(i,{name:"account",modelValue:S.verify,"onUpdate:modelValue":a[3]||(a[3]=e=>S.verify=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.verify")},null,8,["modelValue","placeholder"]),T.value?(d(),c(l,{key:1,class:"get-code get"},{default:o((()=>[g(m(q.value)+"s",1)])),_:1})):(d(),c(l,{key:0,class:"get-code gray",onClick:j},{default:o((()=>[g(m(e.$t("login.register.getVerify")),1)])),_:1}))])),_:1}),p(l,{class:"input-area flex-start-center-nowrap"},{default:o((()=>[p(l,{class:"icon"},{default:o((()=>[p(t,{class:"image",src:E})])),_:1}),p(i,{name:"account",modelValue:S.password,"onUpdate:modelValue":a[4]||(a[4]=e=>S.password=e),class:"input flex-1",type:_.value?"text":"password",maxlength:"12",placeholder:e.$t("login.register.password")},null,8,["modelValue","type","placeholder"]),p(l,{class:"icon",onClick:a[5]||(a[5]=e=>_.value=!_.value)},{default:o((()=>[p(t,{class:"image",src:B})])),_:1})])),_:1}),p(l,{class:"input-area flex-start-center-nowrap"},{default:o((()=>[p(l,{class:"icon"},{default:o((()=>[p(t,{class:"image",src:E})])),_:1}),p(i,{name:"account",modelValue:S.realPassword,"onUpdate:modelValue":a[6]||(a[6]=e=>S.realPassword=e),class:"input flex-1",type:D.value?"text":"password",maxlength:"12",placeholder:e.$t("login.register.password")},null,8,["modelValue","type","placeholder"]),p(l,{class:"icon",onClick:a[7]||(a[7]=e=>D.value=!D.value)},{default:o((()=>[p(t,{class:"image",src:B})])),_:1})])),_:1}),p(l,{class:"input-area flex-start-center-nowrap relative"},{default:o((()=>[p(l,{class:"icon"},{default:o((()=>[p(t,{class:"image",src:X})])),_:1}),p(i,{name:"account",modelValue:S.real_name,"onUpdate:modelValue":a[8]||(a[8]=e=>S.real_name=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.pelaseRealName")},null,8,["modelValue","placeholder"]),p(l,{style:{"font-size":"24rpx",position:"absolute",bottom:"-50rpx",left:"120rpx",color:"#888"}},{default:o((()=>[g(m(e.$t("login.register.real_name")),1)])),_:1})])),_:1}),p(l,{class:"input-area flex-start-center-nowrap"},{default:o((()=>[p(l,{class:"icon"},{default:o((()=>[p(t,{class:"image",src:X})])),_:1}),p(s,{class:"input flex-1",range:H.value,"range-key":"name",onChange:O},{default:o((()=>[null!=S.certificate_type?(d(),c(l,{key:0,class:"input"},{default:o((()=>[g(m(H.value[S.certificate_type].name),1)])),_:1})):(d(),c(l,{key:1,class:"input placeholder"},{default:o((()=>[g(m(e.$t("login.register.certificate_type")),1)])),_:1}))])),_:1},8,["range"])])),_:1}),p(l,{class:"input-area flex-start-center-nowrap"},{default:o((()=>[p(l,{class:"icon"},{default:o((()=>[p(t,{class:"image",src:X})])),_:1}),p(i,{name:"account",modelValue:S.id_number,"onUpdate:modelValue":a[9]||(a[9]=e=>S.id_number=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.id_number")},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"upload-area flex-row-start-center-wrap"},{default:o((()=>[(d(!0),f(x,null,A(S.certificate_image,((e,a)=>(d(),c(t,{class:"upload",key:a,src:e,mode:"aspectFill"},null,8,["src"])))),128)),5!=S.certificate_image.length?(d(),c(l,{key:0,class:"upload flex-center-center-wrap",onClick:L},{default:o((()=>[p(t,{class:"image",src:"data:image/png;base64,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",mode:"widthFix"})])),_:1})):b("",!0)])),_:1}),p(l,{class:"btn",onClick:W},{default:o((()=>[g(m(e.$t("login.register.post")),1)])),_:1}),p(l,{class:"btn line flex-center-center",onClick:a[10]||(a[10]=a=>e.toUrl("/pages/login/login"))},{default:o((()=>[g(m(e.$t("login.register.backLogin")),1)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-d4f97935"]]);export{K as default};
