import{h as e,r as a,j as l,q as t,u as s,o,c as n,w as c,i,a as r,f as u,k as d,t as p,v as m,l as A,p as f,e as g,I as h,S as v}from"./index-3df494fb.js";import{_ as x,a as w,b as y}from"./show.54ffc20f.js";import{a as V,b}from"./uni-app.es.b1e62a0a.js";import{c as _,v as U,r as R,i as I}from"./user.e0035ac6.js";import{_ as M}from"./_plugin-vue_export-helper.6fa35add.js";const B=M({__name:"register",setup(M){const B=e(!1),E=e(0),j=a({mobile:"",invite_mobile:"",verify:"",password:"",realPassword:"",captcha:""}),k=e(!1),D=e(!1),J=e({img:"",key:""});V((e=>{e.code&&(j.invite_mobile=e.code)})),l((()=>{N()}));const Q=async()=>{if(11!==j.mobile.trim().length)return m({title:"请输入正确的手机号",icon:"none"}),!1;if(!j.captcha)return m({title:"请输入正确的算式结果",icon:"none"}),!1;try{const{data:e}=await U({mobile:j.mobile,key:J.value.key,type:"register",captcha:j.captcha});m({title:"验证码发送成功",icon:"none"}),B.value=!0,E.value=60,globalThis.inter=setInterval((()=>{E.value-=1,0==E.value&&(clearInterval(globalThis.inter),B.value=!1)}),1e3)}catch(e){setTimeout((()=>{N()}),1e3)}};b((()=>{clearInterval(globalThis.inter)}));const K=async()=>{if(j.password!=j.realPassword)return m({title:"两次密码输入不匹配",icon:"none"}),!1;if(0==j.invite_mobile.length)return m({title:"请输入",icon:"none"}),!1;const e={mobile:j.mobile,invite_mobile:j.invite_mobile,password:j.password,verify:j.captcha};console.log(e),await R(e);const a=await I();A("userInfo",a.data),f({url:"/pages/login/realName"})},N=()=>{t({mask:!0}),_({type:"register",mobile:j.mobile}).then((({data:e})=>{J.value=e.url,s()}))};return(e,a)=>{const l=i,t=g,s=h,m=v;return o(),n(l,{class:"page flex-column-center-center"},{default:c((()=>[r(m,{"scroll-y":"",class:"scroll"},{default:c((()=>[r(l,{class:"title"},{default:c((()=>[u("注册")])),_:1}),d("",!0),r(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[r(l,{class:"icon"},{default:c((()=>[r(t,{class:"image",src:x})])),_:1}),r(s,{name:"account",modelValue:j.invite_mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>j.invite_mobile=e),class:"input flex-1",type:"text",placeholder:"推荐人"},null,8,["modelValue"])])),_:1}),r(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[r(l,{class:"icon"},{default:c((()=>[r(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAARZJREFUOE9jZKAyYMRmnqKYcBwTE1P1////VRgZGZmQ1fz///8fIyPjnX///rXef/V2Ebp+DAOVxESiGZkYl/xnYDjMwPB/PwMDwz80TUwMDIyOjAwMtv///Y+59+rNUmR5DAOVxUWuMjAwfrz78rUNFsNgepmUxUWPMDD857/78o02IQN//2NkaL//4k0dvuBVlBBpYvrPUHn35RtW/AZKiP7/z/C/4d6LN434DFSSEKlnZGBsuPviNYovMb08aiCucBwNQ3jIDEyyURAX9gc54cHLtxthTiE+UsRFULKeHD+/IAsH6xuQQX9+/BZ59PHjexCb+KyHpXBQEhfpAxly7+WbIqgLiS8cqF58gb1DzQKW0hoBAFga5BVvOK3rAAAAAElFTkSuQmCC"})])),_:1}),r(s,{name:"account",class:"input flex-1",modelValue:j.mobile,"onUpdate:modelValue":a[2]||(a[2]=e=>j.mobile=e),type:"text",maxlength:"11",placeholder:"手机号"},null,8,["modelValue"])])),_:1}),r(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[r(l,{class:"icon"},{default:c((()=>[r(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAgpJREFUOE+V1EuozVEUBvDfVR4ZGJBXooxk4pm8KZSUEgYyMSIiI6XI9BKFUoTMDDBhQpJHorxKRJKR5P0ciIHksZfWuZ1z7vmfc+3JOe3/t7/9rW99e3Xp2+qfsJ+d4F2dAFiAo4nbhBvtzlQRhqKl2IIlOI3ArsEVHMYl9FJcTxhKpmFOUbEIQ3Ae+3AnVc3CdizHV1wtF9/GfdwMTI1wBN7iVQJCRZC9qyhvVJKG+tkYW2yJvQ81wlDzEaHgQR98rYdMwd1iw/BQXSOM3yhhFS7/J2GoPJcW/an38BGOpeHtOJdhb5b6PRu3EZPqPYz/Z/C5+LC5Ddt8XMT1Ys0K/MIRDMsE9DQlOLZhXZE/GQNwMMFP8oKpJZPX8Cyj9C33H+Ik9jcrnJ4dHpd+3isWjMZqvMlARwUL8SnJRuJllh/RaVDYD8/RjeMYWnw5W0qciS/4XUI9Dy/qLNmAXRif3xsIAxdmR6hn5KFBOJGvJvYfN/kbVYSfEfZ/q/npxU1PM7QR7hpmMKKj9WtxufhCaebErKwlYWzGIIgyI+Q/Kjo+MJ9jBDoGRs9qNRwiApHJ8G9rBeGhbFZkLxrVljA+hsIoOfyLOEVDYkXjDpQ3v74Mgyg5FDasdvNwbqqM3O3MU7sxAStxq5X6TgM2cranhHltHj5VfN2B9xVW9OpyFW5MfnhdBajt/wVlqWIV3cWSJQAAAABJRU5ErkJggg=="})])),_:1}),r(s,{name:"account",modelValue:j.verify,"onUpdate:modelValue":a[3]||(a[3]=e=>j.verify=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:"请输入验证码"},null,8,["modelValue"]),B.value?(o(),n(l,{key:1,class:"get-code get"},{default:c((()=>[u(p(E.value)+"s",1)])),_:1})):(o(),n(l,{key:0,class:"get-code gray",onClick:Q},{default:c((()=>[u("获取验证码")])),_:1}))])),_:1}),r(l,{class:"flex-start-center-nowrap"},{default:c((()=>[r(l,{class:"input-area flex-start-center-nowrap",style:{width:"384rpx"}},{default:c((()=>[r(s,{name:"account",modelValue:j.captcha,"onUpdate:modelValue":a[4]||(a[4]=e=>j.captcha=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:"请输入图中算式结果"},null,8,["modelValue"])])),_:1}),r(t,{class:"verify",mode:"widthFix",src:J.value.img,onClick:N},null,8,["src"])])),_:1}),r(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[r(l,{class:"icon"},{default:c((()=>[r(t,{class:"image",src:w})])),_:1}),r(s,{name:"account",modelValue:j.password,"onUpdate:modelValue":a[5]||(a[5]=e=>j.password=e),class:"input flex-1",type:k.value?"text":"password",maxlength:"12",placeholder:"输入您的密码"},null,8,["modelValue","type"]),r(l,{class:"icon",onClick:a[6]||(a[6]=e=>k.value=!k.value)},{default:c((()=>[r(t,{class:"image",src:y})])),_:1})])),_:1}),r(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[r(l,{class:"icon"},{default:c((()=>[r(t,{class:"image",src:w})])),_:1}),r(s,{name:"account",modelValue:j.realPassword,"onUpdate:modelValue":a[7]||(a[7]=e=>j.realPassword=e),class:"input flex-1",type:D.value?"text":"password",maxlength:"12",placeholder:"输入您的密码"},null,8,["modelValue","type"]),r(l,{class:"icon",onClick:a[8]||(a[8]=e=>D.value=!D.value)},{default:c((()=>[r(t,{class:"image",src:y})])),_:1})])),_:1}),r(l,{class:"btn",onClick:K},{default:c((()=>[u("提交")])),_:1}),r(l,{class:"btn line flex-center-center",onClick:a[9]||(a[9]=a=>e.toUrl("/pages/login/login"))},{default:c((()=>[u("手机号登录")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-a0169b50"]]);export{B as default};
