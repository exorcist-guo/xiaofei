import{_ as e,u as a,r as l,f as t,v as s,y as o,z as n,A as r,a as u,w as c,i as d,o as i,b as p,d as m,t as h,E as f,B as _,x,I as g,D as w,k as v}from"./index-DY15h3rT.js";import{c as V,w as y,u as b,d as k}from"./user.DNgVUQ4K.js";import{o as U}from"./uni-app.es.9bL6D3DO.js";import"./request.Bm2Z9kM_.js";const I=e({__name:"without",setup(e){const{t:I}=a(),C=l(),j=l({img:"",key:""}),$=l(!1),q=l(0),N=t({name:"",card_name:"",card_number:"",amount:"",trade_password:"",name:"",lianhang_code:""}),P=l([]);s((()=>{C.value=o("userInfo").integral,z(),N.mobile=o("userInfo").mobile,T()})),U((()=>{amount.value=o("userInfo").integral}));const T=()=>{n({mask:!0}),V({type:"wit"}).then((({data:e})=>{j.value=e.url,r()}))},z=()=>{y().then((({data:e})=>{console.log(e),P.value=e.card_names,e.hasOwnProperty("collection_info")&&(N.card_name=e.collection_info.card_name,N.card_number=e.collection_info.card_number,N.name=e.collection_info.name)}))},A=async()=>{if(!N.captcha)return _({title:I("login.register.regCaptcha"),icon:"none"}),!1;try{const{data:e}=await b({key:j.value.key,type:"withdrawal",captcha:N.captcha});_({title:I("login.register.sendSucess"),icon:"none"}),$.value=!0,q.value=60,globalThis.inter=setInterval((()=>{console.log(q.value),q.value-=1,0==q.value&&(clearInterval(globalThis.inter),$.value=!1)}),1e3)}catch(e){setTimeout((()=>{T()}),1e3)}},B=()=>N.amount>C.value?(_({title:I("user.without.numberNot")}),!1):0==N.name.length?(_({title:I("user.without.requireName")}),!1):void k(N).then((({data:e})=>{_({title:I("user.without.sucess"),icon:"none"}),x({url:"/pages/data/source"})})),D=e=>{N.card_name=P.value[e.detail.value],N.card_number=""};return(e,a)=>{const l=d,t=g,s=w,o=v;return i(),u(l,{class:"page flex-column-start-center"},{default:c((()=>[p(l,{class:"card"},{default:c((()=>[p(l,{class:"title"},{default:c((()=>[m(h(f(I)("user.without.title")),1)])),_:1}),p(l,{class:"content flex-start-center-nowrap"},{default:c((()=>[p(l,{class:"unit"},{default:c((()=>[m("Â¥")])),_:1}),p(t,{class:"flex-1",modelValue:N.amount,"onUpdate:modelValue":a[0]||(a[0]=e=>N.amount=e),placeholder:C.value},null,8,["modelValue","placeholder"]),p(l,{class:"text",onClick:a[1]||(a[1]=e=>N.amount=C.value)},{default:c((()=>[m(h(f(I)("user.without.text")),1)])),_:1})])),_:1}),p(s,{mode:"selector",range:P.value,onChange:D},{default:c((()=>[p(l,{class:"flex-row-between-nowrap footer"},{default:c((()=>[p(l,{class:"label"},{default:c((()=>[m(h(f(I)("user.without.label")),1)])),_:1}),p(l,{class:"choose flex-start-center-nowrap"},{default:c((()=>[m(h((null==N?void 0:N.card_name)||f(I)("user.without.choose"))+" ",1),p(l,{class:"icon"})])),_:1})])),_:1})])),_:1},8,["range"])])),_:1}),p(l,{class:"line-input flex-start-center-nowrap"},{default:c((()=>[p(t,{class:"text",modelValue:N.card_number,"onUpdate:modelValue":a[2]||(a[2]=e=>N.card_number=e),placeholder:f(I)("user.without.cardName"),"placeholder-class":"text"},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"line-input flex-start-center-nowrap"},{default:c((()=>[p(t,{class:"text",type:"text",modelValue:N.name,"onUpdate:modelValue":a[3]||(a[3]=e=>N.name=e),placeholder:f(I)("user.push.name"),"placeholder-class":"text"},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"line-input flex-start-center-nowrap"},{default:c((()=>[p(t,{class:"text",type:"text",modelValue:N.lianhang_code,"onUpdate:modelValue":a[4]||(a[4]=e=>N.lianhang_code=e),placeholder:f(I)("user.push.lianhang_code"),"placeholder-class":"text"},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"flex-start-center-nowrap"},{default:c((()=>[p(l,{class:"line-input flex-start-center-nowrap",style:{width:"384rpx"}},{default:c((()=>[p(t,{name:"account",modelValue:N.captcha,"onUpdate:modelValue":a[5]||(a[5]=e=>N.captcha=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.captcha")},null,8,["modelValue","placeholder"])])),_:1}),p(o,{class:"verify",mode:"widthFix",src:j.value.img,onClick:T},null,8,["src"])])),_:1}),p(l,{class:"line-input flex-start-center-nowrap"},{default:c((()=>[p(t,{name:"account",class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.mobile"),disabled:"",modelValue:N.mobile,"onUpdate:modelValue":a[6]||(a[6]=e=>N.mobile=e)},null,8,["placeholder","modelValue"]),$.value?(i(),u(l,{key:1,class:"get-code get"},{default:c((()=>[m(h(q.value)+"s",1)])),_:1})):(i(),u(l,{key:0,class:"get-code gray",onClick:A},{default:c((()=>[m(h(e.$t("login.register.getVerify")),1)])),_:1}))])),_:1}),p(l,{class:"line-input flex-start-center-nowrap"},{default:c((()=>[p(t,{class:"text",type:"text",modelValue:N.verify,"onUpdate:modelValue":a[7]||(a[7]=e=>N.verify=e),placeholder:e.$t("login.forgetPassWord.verify"),"placeholder-class":"text"},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"line-input flex-start-center-nowrap"},{default:c((()=>[p(t,{class:"text",type:"password",modelValue:N.trade_password,"onUpdate:modelValue":a[8]||(a[8]=e=>N.trade_password=e),placeholder:f(I)("user.push.tradePassword"),"placeholder-class":"text"},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"btn",onClick:B},{default:c((()=>[m(h(f(I)("user.push.confirm")),1)])),_:1})])),_:1})}}},[["__scopeId","data-v-82edcdad"]]);export{I as default};
