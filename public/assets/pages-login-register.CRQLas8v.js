import{_ as e,u as a,r as l,f as t,p as s,A as o,B as r,a as i,w as n,i as c,o as u,b as d,d as p,t as g,C as m,x as A,z as f,k as h,I as w,S as x}from"./index-JN3MqxNP.js";import{_ as v,a as y,b as V}from"./show.B0O9Pu_2.js";import{a as b,b as _}from"./uni-app.es.BgL2matC.js";import{c as U,v as I,r as R,i as M}from"./user.BIUf3OX6.js";import"./request.Bbgpknwy.js";const k=e({__name:"register",setup(e){const{t:k}=a(),B=l(!1),E=l(0),C=t({nick_name:"",mobile:"",invite_mobile:"",verify:"",password:"",realPassword:"",captcha:""}),D=l(!1),J=l(!1),Q=l({img:"",key:""});b((e=>{e.code&&(C.invite_mobile=e.code)})),s((()=>{Z()}));const K=async()=>{if(console.log(k("login.register.regMobile")),!C.mobile.match(/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$/))return m({title:k("login.register.regMobile"),icon:"none"}),!1;if(!C.captcha)return m({title:k("login.register.regCaptcha"),icon:"none"}),!1;try{const{data:e}=await I({mobile:C.mobile,key:Q.value.key,type:"register",captcha:C.captcha});m({title:k("login.register.sendSucess"),icon:"none"}),B.value=!0,E.value=60,globalThis.inter=setInterval((()=>{E.value-=1,0==E.value&&(clearInterval(globalThis.inter),B.value=!1)}),1e3)}catch(e){setTimeout((()=>{Z()}),1e3)}};_((()=>{clearInterval(globalThis.inter)}));const N=async()=>{if(C.password!=C.realPassword)return m({title:k("login.register.faillPass"),icon:"none"}),!1;if(0==C.invite_mobile.length)return m({title:k("login.register.pelaseInput"),icon:"none"}),!1;const e={mobile:C.mobile,invite_mobile:C.invite_mobile,password:C.password,verify:C.captcha};console.log(e),await R(e);const a=await M();A("userInfo",a.data),f({url:"/pages/login/realName"})},Z=()=>{o({mask:!0}),U({type:"register",mobile:C.mobile}).then((({data:e})=>{Q.value=e.url,r()}))};return(e,a)=>{const l=c,t=h,s=w,o=x;return u(),i(l,{class:"page flex-column-center-center"},{default:n((()=>[d(o,{"scroll-y":"",class:"scroll"},{default:n((()=>[d(l,{class:"title"},{default:n((()=>[p(g(e.$t("login.register.title")),1)])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:v})])),_:1}),d(s,{name:"account",modelValue:C.invite_mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>C.invite_mobile=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.invite_mobile")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAARZJREFUOE9jZKAyYMRmnqKYcBwTE1P1////VRgZGZmQ1fz///8fIyPjnX///rXef/V2Ebp+DAOVxESiGZkYl/xnYDjMwPB/PwMDwz80TUwMDIyOjAwMtv///Y+59+rNUmR5DAOVxUWuMjAwfrz78rUNFsNgepmUxUWPMDD857/78o02IQN//2NkaL//4k0dvuBVlBBpYvrPUHn35RtW/AZKiP7/z/C/4d6LN434DFSSEKlnZGBsuPviNYovMb08aiCucBwNQ3jIDEyyURAX9gc54cHLtxthTiE+UsRFULKeHD+/IAsH6xuQQX9+/BZ59PHjexCb+KyHpXBQEhfpAxly7+WbIqgLiS8cqF58gb1DzQKW0hoBAFga5BVvOK3rAAAAAElFTkSuQmCC"})])),_:1}),d(s,{name:"account",class:"input flex-1",modelValue:C.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>C.mobile=e),type:"text",placeholder:e.$t("login.register.mobile")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAgpJREFUOE+V1EuozVEUBvDfVR4ZGJBXooxk4pm8KZSUEgYyMSIiI6XI9BKFUoTMDDBhQpJHorxKRJKR5P0ciIHksZfWuZ1z7vmfc+3JOe3/t7/9rW99e3Xp2+qfsJ+d4F2dAFiAo4nbhBvtzlQRhqKl2IIlOI3ArsEVHMYl9FJcTxhKpmFOUbEIQ3Ae+3AnVc3CdizHV1wtF9/GfdwMTI1wBN7iVQJCRZC9qyhvVJKG+tkYW2yJvQ81wlDzEaHgQR98rYdMwd1iw/BQXSOM3yhhFS7/J2GoPJcW/an38BGOpeHtOJdhb5b6PRu3EZPqPYz/Z/C5+LC5Ddt8XMT1Ys0K/MIRDMsE9DQlOLZhXZE/GQNwMMFP8oKpJZPX8Cyj9C33H+Ik9jcrnJ4dHpd+3isWjMZqvMlARwUL8SnJRuJllh/RaVDYD8/RjeMYWnw5W0qciS/4XUI9Dy/qLNmAXRif3xsIAxdmR6hn5KFBOJGvJvYfN/kbVYSfEfZ/q/npxU1PM7QR7hpmMKKj9WtxufhCaebErKwlYWzGIIgyI+Q/Kjo+MJ9jBDoGRs9qNRwiApHJ8G9rBeGhbFZkLxrVljA+hsIoOfyLOEVDYkXjDpQ3v74Mgyg5FDasdvNwbqqM3O3MU7sxAStxq5X6TgM2cranhHltHj5VfN2B9xVW9OpyFW5MfnhdBajt/wVlqWIV3cWSJQAAAABJRU5ErkJggg=="})])),_:1}),d(s,{name:"account",modelValue:C.verify,"onUpdate:modelValue":a[2]||(a[2]=e=>C.verify=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.verify")},null,8,["modelValue","placeholder"]),B.value?(u(),i(l,{key:1,class:"get-code get"},{default:n((()=>[p(g(E.value)+"s",1)])),_:1})):(u(),i(l,{key:0,class:"get-code gray",onClick:K},{default:n((()=>[p(g(e.$t("login.register.getVerify")),1)])),_:1}))])),_:1}),d(l,{class:"flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"input-area flex-start-center-nowrap",style:{width:"384rpx"}},{default:n((()=>[d(s,{name:"account",modelValue:C.captcha,"onUpdate:modelValue":a[3]||(a[3]=e=>C.captcha=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.captcha")},null,8,["modelValue","placeholder"])])),_:1}),d(t,{class:"verify",mode:"widthFix",src:Q.value.img,onClick:Z},null,8,["src"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:v})])),_:1}),d(s,{name:"account",modelValue:C.nick_name,"onUpdate:modelValue":a[4]||(a[4]=e=>C.nick_name=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.nick_name")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:y})])),_:1}),d(s,{name:"account",modelValue:C.password,"onUpdate:modelValue":a[5]||(a[5]=e=>C.password=e),class:"input flex-1",type:D.value?"text":"password",maxlength:"12",placeholder:e.$t("login.register.password")},null,8,["modelValue","type","placeholder"]),d(l,{class:"icon",onClick:a[6]||(a[6]=e=>D.value=!D.value)},{default:n((()=>[d(t,{class:"image",src:V})])),_:1})])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:y})])),_:1}),d(s,{name:"account",modelValue:C.realPassword,"onUpdate:modelValue":a[7]||(a[7]=e=>C.realPassword=e),class:"input flex-1",type:J.value?"text":"password",maxlength:"12",placeholder:e.$t("login.register.password")},null,8,["modelValue","type","placeholder"]),d(l,{class:"icon",onClick:a[8]||(a[8]=e=>J.value=!J.value)},{default:n((()=>[d(t,{class:"image",src:V})])),_:1})])),_:1}),d(l,{class:"btn",onClick:N},{default:n((()=>[p(g(e.$t("login.register.post")),1)])),_:1}),d(l,{class:"btn line flex-center-center",onClick:a[9]||(a[9]=a=>e.toUrl("/pages/login/login"))},{default:n((()=>[p(g(e.$t("login.register.backLogin")),1)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-5c487088"]]);export{k as default};
