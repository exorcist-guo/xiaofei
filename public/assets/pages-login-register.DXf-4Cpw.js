import{_ as e,u as a,r as l,f as t,p as s,y as o,z as r,a as i,w as n,i as c,o as u,b as d,d as p,t as g,A as m,B as A,q as f,x as h,k as w,I as x,S as v}from"./index-B-4_BZ3m.js";import{_ as y,a as b,b as V}from"./show.B0O9Pu_2.js";import{a as _,b as U}from"./uni-app.es.B6p-sefQ.js";import{c as I,v as R,r as M,i as k}from"./user.OKHCT0CY.js";import"./request.DUiy3VGW.js";const B=e({__name:"register",setup(e){const{t:B}=a(),E=l(!1),D=l(0),J=t({nick_name:"",mobile:"",invite_mobile:"",verify:"",password:"",realPassword:"",captcha:"",name:""}),Q=l(!1),C=l(!1),K=l({img:"",key:""});_((e=>{e.code&&(J.invite_mobile=e.code)})),s((()=>{j()}));const N=async()=>{if(console.log(B("login.register.regMobile")),!J.mobile.match(/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$/))return m({title:B("login.register.regMobile"),icon:"none"}),!1;if(!J.captcha)return m({title:B("login.register.regCaptcha"),icon:"none"}),!1;try{const{data:e}=await R({mobile:J.mobile,key:K.value.key,type:"register",captcha:J.captcha,nation:A("locale").country});m({title:B("login.register.sendSucess"),icon:"none"}),E.value=!0,D.value=60,globalThis.inter=setInterval((()=>{D.value-=1,0==D.value&&(clearInterval(globalThis.inter),E.value=!1)}),1e3)}catch(e){setTimeout((()=>{j()}),1e3)}};U((()=>{clearInterval(globalThis.inter)}));const Z=async()=>{if(J.password!=J.realPassword)return m({title:B("login.register.faillPass"),icon:"none"}),!1;if(0==J.invite_mobile.length)return m({title:B("login.register.pelaseInput"),icon:"none"}),!1;const e={mobile:J.mobile,invite_mobile:J.invite_mobile,password:J.password,verify:J.captcha};console.log(e),await M(e);const a=await k();f("userInfo",a.data),h({url:"/pages/login/realName"})},j=()=>{o({mask:!0}),I({type:"register",mobile:J.mobile}).then((({data:e})=>{K.value=e.url,r()}))};return(e,a)=>{const l=c,t=w,s=x,o=v;return u(),i(l,{class:"page flex-column-center-center"},{default:n((()=>[d(o,{"scroll-y":"",class:"scroll"},{default:n((()=>[d(l,{class:"title"},{default:n((()=>[p(g(e.$t("login.register.title")),1)])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:y})])),_:1}),d(s,{name:"account",modelValue:J.invite_mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>J.invite_mobile=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.invite_mobile")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAARZJREFUOE9jZKAyYMRmnqKYcBwTE1P1////VRgZGZmQ1fz///8fIyPjnX///rXef/V2Ebp+DAOVxESiGZkYl/xnYDjMwPB/PwMDwz80TUwMDIyOjAwMtv///Y+59+rNUmR5DAOVxUWuMjAwfrz78rUNFsNgepmUxUWPMDD857/78o02IQN//2NkaL//4k0dvuBVlBBpYvrPUHn35RtW/AZKiP7/z/C/4d6LN434DFSSEKlnZGBsuPviNYovMb08aiCucBwNQ3jIDEyyURAX9gc54cHLtxthTiE+UsRFULKeHD+/IAsH6xuQQX9+/BZ59PHjexCb+KyHpXBQEhfpAxly7+WbIqgLiS8cqF58gb1DzQKW0hoBAFga5BVvOK3rAAAAAElFTkSuQmCC"})])),_:1}),d(s,{name:"account",class:"input flex-1",modelValue:J.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>J.mobile=e),type:"text",placeholder:e.$t("login.register.mobile")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAgpJREFUOE+V1EuozVEUBvDfVR4ZGJBXooxk4pm8KZSUEgYyMSIiI6XI9BKFUoTMDDBhQpJHorxKRJKR5P0ciIHksZfWuZ1z7vmfc+3JOe3/t7/9rW99e3Xp2+qfsJ+d4F2dAFiAo4nbhBvtzlQRhqKl2IIlOI3ArsEVHMYl9FJcTxhKpmFOUbEIQ3Ae+3AnVc3CdizHV1wtF9/GfdwMTI1wBN7iVQJCRZC9qyhvVJKG+tkYW2yJvQ81wlDzEaHgQR98rYdMwd1iw/BQXSOM3yhhFS7/J2GoPJcW/an38BGOpeHtOJdhb5b6PRu3EZPqPYz/Z/C5+LC5Ddt8XMT1Ys0K/MIRDMsE9DQlOLZhXZE/GQNwMMFP8oKpJZPX8Cyj9C33H+Ik9jcrnJ4dHpd+3isWjMZqvMlARwUL8SnJRuJllh/RaVDYD8/RjeMYWnw5W0qciS/4XUI9Dy/qLNmAXRif3xsIAxdmR6hn5KFBOJGvJvYfN/kbVYSfEfZ/q/npxU1PM7QR7hpmMKKj9WtxufhCaebErKwlYWzGIIgyI+Q/Kjo+MJ9jBDoGRs9qNRwiApHJ8G9rBeGhbFZkLxrVljA+hsIoOfyLOEVDYkXjDpQ3v74Mgyg5FDasdvNwbqqM3O3MU7sxAStxq5X6TgM2cranhHltHj5VfN2B9xVW9OpyFW5MfnhdBajt/wVlqWIV3cWSJQAAAABJRU5ErkJggg=="})])),_:1}),d(s,{name:"account",modelValue:J.verify,"onUpdate:modelValue":a[2]||(a[2]=e=>J.verify=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.verify")},null,8,["modelValue","placeholder"]),E.value?(u(),i(l,{key:1,class:"get-code get"},{default:n((()=>[p(g(D.value)+"s",1)])),_:1})):(u(),i(l,{key:0,class:"get-code gray",onClick:N},{default:n((()=>[p(g(e.$t("login.register.getVerify")),1)])),_:1}))])),_:1}),d(l,{class:"flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"input-area flex-start-center-nowrap",style:{width:"384rpx"}},{default:n((()=>[d(s,{name:"account",modelValue:J.captcha,"onUpdate:modelValue":a[3]||(a[3]=e=>J.captcha=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.captcha")},null,8,["modelValue","placeholder"])])),_:1}),d(t,{class:"verify",mode:"widthFix",src:K.value.img,onClick:j},null,8,["src"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:y})])),_:1}),d(s,{name:"account",modelValue:J.nick_name,"onUpdate:modelValue":a[4]||(a[4]=e=>J.nick_name=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.nick_name")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:b})])),_:1}),d(s,{name:"account",modelValue:J.password,"onUpdate:modelValue":a[5]||(a[5]=e=>J.password=e),class:"input flex-1",type:Q.value?"text":"password",maxlength:"12",placeholder:e.$t("login.register.password")},null,8,["modelValue","type","placeholder"]),d(l,{class:"icon",onClick:a[6]||(a[6]=e=>Q.value=!Q.value)},{default:n((()=>[d(t,{class:"image",src:V})])),_:1})])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:n((()=>[d(l,{class:"icon"},{default:n((()=>[d(t,{class:"image",src:b})])),_:1}),d(s,{name:"account",modelValue:J.realPassword,"onUpdate:modelValue":a[7]||(a[7]=e=>J.realPassword=e),class:"input flex-1",type:C.value?"text":"password",maxlength:"12",placeholder:e.$t("login.register.password")},null,8,["modelValue","type","placeholder"]),d(l,{class:"icon",onClick:a[8]||(a[8]=e=>C.value=!C.value)},{default:n((()=>[d(t,{class:"image",src:V})])),_:1})])),_:1}),d(l,{class:"btn",onClick:Z},{default:n((()=>[p(g(e.$t("login.register.post")),1)])),_:1}),d(l,{class:"btn line flex-center-center",onClick:a[9]||(a[9]=a=>e.toUrl("/pages/login/login"))},{default:n((()=>[p(g(e.$t("login.register.backLogin")),1)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-39b3a669"]]);export{B as default};
