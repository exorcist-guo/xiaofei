import{_ as e,u as a,r as l,f as t,y as s,p as o,z as n,A as i,a as r,w as c,i as u,o as p,b as d,d as m,t as g,B as f,q as A,x as h,k as x,I as v,S as w}from"./index-DwE6jKB5.js";import{_ as y,a as V,b}from"./show.B0O9Pu_2.js";import{a as _,o as U,b as I}from"./uni-app.es.coLHIkIm.js";import{c as R,v as M,r as k,i as B}from"./user.BVsDc1FP.js";import"./request.iDM26VIX.js";const E=e({__name:"register",setup(e){const{t:E}=a(),D=l(!1),J=l(0),Q=t({nick_name:"",mobile:"",invite_mobile:"",verify:"",password:"",realPassword:"",captcha:"",name:"",nation:""}),C=l(!1),K=l(!1),N=l({img:"",key:""});_((e=>{s("invite_mobile")&&(Q.invite_mobile=s("invite_mobile"))})),o((()=>{P()})),U((()=>{console.log(J.value)}));const Z=async()=>{if(console.log(E("login.register.regMobile")),!Q.mobile.match(/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$/))return f({title:E("login.register.regMobile"),icon:"none"}),!1;if(!Q.captcha)return f({title:E("login.register.regCaptcha"),icon:"none"}),!1;try{const{data:e}=await M({mobile:Q.mobile,key:N.value.key,type:"register",captcha:Q.captcha});f({title:E("login.register.sendSucess"),icon:"none"}),D.value=!0,J.value=60,globalThis.inter=setInterval((()=>{J.value-=1,0==J.value&&(clearInterval(globalThis.inter),D.value=!1)}),1e3)}catch(e){setTimeout((()=>{P()}),1e3)}};I((()=>{clearInterval(globalThis.inter)}));const j=async()=>{if(Q.password!=Q.realPassword)return f({title:E("login.register.faillPass"),icon:"none"}),!1;if(0==Q.invite_mobile.length)return f({title:E("login.register.pelaseInput"),icon:"none"}),!1;const e={mobile:Q.mobile,invite_mobile:Q.invite_mobile,password:Q.password,verify:Q.captcha,nation:s("locale").country,name:Q.name};console.log(e),await k(e);const a=await B();A("userInfo",a.data),h({url:"/pages/login/realName"})},P=()=>{n({mask:!0}),R({type:"register",mobile:Q.mobile}).then((({data:e})=>{N.value=e.url,i()}))};return(e,a)=>{const l=u,t=x,s=v,o=w;return p(),r(l,{class:"page flex-column-center-center"},{default:c((()=>[d(o,{"scroll-y":"",class:"scroll"},{default:c((()=>[d(l,{class:"title"},{default:c((()=>[m(g(e.$t("login.register.title")),1)])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[d(l,{class:"icon"},{default:c((()=>[d(t,{class:"image",src:y})])),_:1}),d(s,{name:"account",modelValue:Q.invite_mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>Q.invite_mobile=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.invite_mobile")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[d(l,{class:"icon"},{default:c((()=>[d(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAARZJREFUOE9jZKAyYMRmnqKYcBwTE1P1////VRgZGZmQ1fz///8fIyPjnX///rXef/V2Ebp+DAOVxESiGZkYl/xnYDjMwPB/PwMDwz80TUwMDIyOjAwMtv///Y+59+rNUmR5DAOVxUWuMjAwfrz78rUNFsNgepmUxUWPMDD857/78o02IQN//2NkaL//4k0dvuBVlBBpYvrPUHn35RtW/AZKiP7/z/C/4d6LN434DFSSEKlnZGBsuPviNYovMb08aiCucBwNQ3jIDEyyURAX9gc54cHLtxthTiE+UsRFULKeHD+/IAsH6xuQQX9+/BZ59PHjexCb+KyHpXBQEhfpAxly7+WbIqgLiS8cqF58gb1DzQKW0hoBAFga5BVvOK3rAAAAAElFTkSuQmCC"})])),_:1}),d(s,{name:"account",class:"input flex-1",modelValue:Q.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>Q.mobile=e),type:"text",placeholder:e.$t("login.register.mobile")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[d(l,{class:"icon"},{default:c((()=>[d(t,{class:"image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAgpJREFUOE+V1EuozVEUBvDfVR4ZGJBXooxk4pm8KZSUEgYyMSIiI6XI9BKFUoTMDDBhQpJHorxKRJKR5P0ciIHksZfWuZ1z7vmfc+3JOe3/t7/9rW99e3Xp2+qfsJ+d4F2dAFiAo4nbhBvtzlQRhqKl2IIlOI3ArsEVHMYl9FJcTxhKpmFOUbEIQ3Ae+3AnVc3CdizHV1wtF9/GfdwMTI1wBN7iVQJCRZC9qyhvVJKG+tkYW2yJvQ81wlDzEaHgQR98rYdMwd1iw/BQXSOM3yhhFS7/J2GoPJcW/an38BGOpeHtOJdhb5b6PRu3EZPqPYz/Z/C5+LC5Ddt8XMT1Ys0K/MIRDMsE9DQlOLZhXZE/GQNwMMFP8oKpJZPX8Cyj9C33H+Ik9jcrnJ4dHpd+3isWjMZqvMlARwUL8SnJRuJllh/RaVDYD8/RjeMYWnw5W0qciS/4XUI9Dy/qLNmAXRif3xsIAxdmR6hn5KFBOJGvJvYfN/kbVYSfEfZ/q/npxU1PM7QR7hpmMKKj9WtxufhCaebErKwlYWzGIIgyI+Q/Kjo+MJ9jBDoGRs9qNRwiApHJ8G9rBeGhbFZkLxrVljA+hsIoOfyLOEVDYkXjDpQ3v74Mgyg5FDasdvNwbqqM3O3MU7sxAStxq5X6TgM2cranhHltHj5VfN2B9xVW9OpyFW5MfnhdBajt/wVlqWIV3cWSJQAAAABJRU5ErkJggg=="})])),_:1}),d(s,{name:"account",modelValue:Q.verify,"onUpdate:modelValue":a[2]||(a[2]=e=>Q.verify=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.verify")},null,8,["modelValue","placeholder"]),D.value?(p(),r(l,{key:1,class:"get-code get"},{default:c((()=>[m(g(J.value)+"s",1)])),_:1})):(p(),r(l,{key:0,class:"get-code gray",onClick:Z},{default:c((()=>[m(g(e.$t("login.register.getVerify")),1)])),_:1}))])),_:1}),d(l,{class:"flex-start-center-nowrap"},{default:c((()=>[d(l,{class:"input-area flex-start-center-nowrap",style:{width:"384rpx"}},{default:c((()=>[d(s,{name:"account",modelValue:Q.captcha,"onUpdate:modelValue":a[3]||(a[3]=e=>Q.captcha=e),class:"input flex-1",type:"text",maxlength:"11",placeholder:e.$t("login.register.captcha")},null,8,["modelValue","placeholder"])])),_:1}),d(t,{class:"verify",mode:"widthFix",src:N.value.img,onClick:P},null,8,["src"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[d(l,{class:"icon"},{default:c((()=>[d(t,{class:"image",src:y})])),_:1}),d(s,{name:"account",modelValue:Q.nick_name,"onUpdate:modelValue":a[4]||(a[4]=e=>Q.nick_name=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.nick_name")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[d(l,{class:"icon"},{default:c((()=>[d(t,{class:"image",src:y})])),_:1}),d(s,{name:"account",modelValue:Q.name,"onUpdate:modelValue":a[5]||(a[5]=e=>Q.name=e),class:"input flex-1",type:"text",placeholder:e.$t("login.register.name")},null,8,["modelValue","placeholder"])])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[d(l,{class:"icon"},{default:c((()=>[d(t,{class:"image",src:V})])),_:1}),d(s,{name:"account",modelValue:Q.password,"onUpdate:modelValue":a[6]||(a[6]=e=>Q.password=e),class:"input flex-1",type:C.value?"text":"password",maxlength:"12",placeholder:e.$t("login.register.password")},null,8,["modelValue","type","placeholder"]),d(l,{class:"icon",onClick:a[7]||(a[7]=e=>C.value=!C.value)},{default:c((()=>[d(t,{class:"image",src:b})])),_:1})])),_:1}),d(l,{class:"input-area flex-start-center-nowrap"},{default:c((()=>[d(l,{class:"icon"},{default:c((()=>[d(t,{class:"image",src:V})])),_:1}),d(s,{name:"account",modelValue:Q.realPassword,"onUpdate:modelValue":a[8]||(a[8]=e=>Q.realPassword=e),class:"input flex-1",type:K.value?"text":"password",maxlength:"12",placeholder:e.$t("login.register.password")},null,8,["modelValue","type","placeholder"]),d(l,{class:"icon",onClick:a[9]||(a[9]=e=>K.value=!K.value)},{default:c((()=>[d(t,{class:"image",src:b})])),_:1})])),_:1}),d(l,{class:"btn",onClick:j},{default:c((()=>[m(g(e.$t("login.register.post")),1)])),_:1}),d(l,{class:"btn line flex-center-center",onClick:a[10]||(a[10]=a=>e.toUrl("/pages/login/login"))},{default:c((()=>[m(g(e.$t("login.register.backLogin")),1)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-01365b38"]]);export{E as default};
